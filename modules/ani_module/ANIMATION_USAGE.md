# 動畫列表功能解釋

---

目前現有的動畫 (參照config.yaml):

動畫名稱|說明|對應狀態|使用情境
---|---|---|---
**enter**|角色進入場景的動畫|無|角色初次出現時播放
**leave**|角色離開場景的動畫|無|角色退出場景時播放
**angry_idle_f**|生氣的閒置動畫|浮空|系統數值中mood低於一個閥值並且pride高於一個閥值時替代一般閒置動畫
**awkward_f**|尷尬的閒置動畫|浮空|系統數值中mood高於一個閥值並且pride低於一個閥值時替代一般閒置動畫
**click_f**|點擊檔案或者應用程式的動畫|浮空|目前暫時停用
**curious_idle_f**|好奇的閒置動畫|浮空|系統數值中mood高於一個閥值並且pride高於一個閥值時替代一般閒置動畫
**dance_f**|跳舞動畫|浮空|彩蛋動畫，於閒置中偶然出現（無條件限制）
**dance2_g**|跳舞動畫2|地面|彩蛋動畫，於閒置中偶然出現（無條件限制）
**data_processing_f**|處理層動畫|浮空|當系統循環處於處理層時撥放
**data_processing_g**|處理層動畫|地面|當系統循環處於處理層時撥放
**chilling_f**|放鬆的閒置動畫|浮空|彩蛋動畫，於閒置中偶然出現（TODO: 需要最近播放過音樂）
**laugh_f**|笑的閒置動畫|浮空|當系統存在CS中，並且於輸出層時可能取代一般輸出層動畫
**push_down**|向下推動畫|無|UEP拖動窗口往下時的動畫
**push_up**|向上推動畫|無|UEP拖動窗口往上時的動畫
**push_left**|向左推動畫|無|UEP拖動窗口往左時的動畫
**push_right**|向右推動畫|無|UEP拖動窗口往右時的動畫
**smile_idle_f**|一般閒置動畫|浮空|不存在系統會話並且系統狀態為IDLE時的動畫
**stand_idle_g**|一般閒置動畫|地面|不存在系統會話並且系統狀態為IDLE時的動畫
**struggle_f**|掙扎動畫|無|使用者拖曳UEP時撥放的動畫
**talk_ani_f**|輸出層動畫|浮空|當系統循環處於輸出層，並且系統mood大於0時撥放
**talk_ani2_f**|輸出層動畫2|浮空|當系統循環處於輸出層，並且系統mood小於等於0時撥放
**talk_ani_g**|輸出層動畫|地面|當系統循環處於輸出層時撥放
**thinking_f**|輸入層動畫|浮空|當系統循環處於輸入層時撥放（無檔案時）
**thinking_g**|輸入層動畫|地面|當系統循環處於輸入層時撥放（無檔案時）
**take_file_f**|輸入層動畫|浮空|當系統循環處於輸入層且有檔案時撥放（取代thinking）
**take_file_g**|輸入層動畫|地面|當系統循環處於輸入層且有檔案時撥放（取代thinking）
**tease2_f**|捉弄動畫（活潑版）|浮空|當使用者在短時間內多次互動UEP（拖曳/投擲，預設3次/10秒），並且系統mood > 0時播放
**tease_f**|捉弄動畫（基本版）|浮空|當使用者在短時間內多次互動UEP（拖曳/投擲，預設3次/10秒），並且系統mood ≤ 0時播放
**turn_head_g**|跟隨動畫|地面|當使用者的滑鼠位於附近時，UEP會跟隨滑鼠方向轉頭
**turn_head_f**|跟隨動畫|浮空|當使用者的滑鼠位於附近時，UEP會跟隨滑鼠方向轉頭
**turn_left_g**|轉向動畫|地面|當UEP從閒置或者向右走動畫轉向時撥放的動畫
**turn_right_g**|轉向動畫|地面|當UEP從閒置或者向左走動畫轉向時撥放的動畫
**turn_walk_g**|轉向走路動畫|地面|我也不清楚這個動畫是做什麼的
**walk_left_g**|向左走動畫|地面|當UEP向左走時撥放的動畫
**walk_right_g**|向右走動畫|地面|當UEP向右走時撥放的動畫
**yawn_g**|打哈欠動畫|地面|彩蛋動畫，於閒置中偶然出現（需要 boredom > 0.6）
**sleep_l**|睡眠動畫|地面|當UEP進入睡眠狀態時的閒置動畫
**f_to_g**|轉場動畫|無|當UEP從浮空狀態切換到地面狀態時撥放
**g_to_f**|轉場動畫|無|當UEP從地面狀態切換到浮空狀態時撥放
**g_to_l**|轉場動畫|無|當UEP從地面狀態切換到睡眠狀態時撥放
**l_to_g**|轉場動畫|無|當UEP從睡眠狀態切換到地面狀態時撥放

---

## Tease 動畫觸發機制

### 互動追蹤系統

MOV 模組使用 `TeaseTracker` 追蹤使用者與 UEP 的互動頻率，記錄以下行為：
- **互動**: 每次拖曳或投擲結束時記錄

### 觸發條件

在**時間窗口**（預設 10 秒）內：

**當互動次數 ≥ `interaction_threshold`（預設 3 次）時觸發 tease 動畫：**

1. **tease2_f** (活潑捉弄動畫)
   - 當 `mood > 0`（系統心情良好）

2. **tease_f** (基本捉弄動畫)
   - 當 `mood ≤ 0`（系統心情不佳或中性）

### 行為特性

- **動畫選擇**: 只由 mood 值決定，拖曳和投擲都算捉弄互動
- **事件忽略**: tease 動畫播放期間，所有拖曳事件都會被忽略
- **狀態清理**: 動畫完成後清空互動記錄，恢復 IDLE 狀態
- **時間窗口**: 超過時間窗口的舊互動記錄會自動清除
- **滑鼠追蹤修正**: 追蹤時暫停行為更新，防止移動中播放閒置動畫

### 配置說明

詳細配置請參考 `modules/mov_module/TEASE_CONFIG.md`

預設配置：
```yaml
tease_tracking:
  time_window: 10.0           # 互動計數時間窗口（秒）
  interaction_threshold: 3    # 觸發 tease 所需的互動次數（拖曳+投擲）
```