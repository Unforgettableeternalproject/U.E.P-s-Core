# TTS Module Configuration (IndexTTS Lite)
# ä½¿ç”¨ IndexTTS Lite å¼•æ“é€²è¡ŒèªéŸ³åˆæˆï¼Œæ”¯æŒæƒ…æ„Ÿæ§åˆ¶

# æ¨¡å‹è·¯å¾‘é…ç½®
model_dir: "modules/tts_module/checkpoints"  # IndexTTS æ¨¡å‹ç›®éŒ„
character_dir: "models/tts/"  # è§’è‰²ç‰¹å¾µç›®éŒ„ (.pt æ–‡ä»¶)
default_character: "uep"  # é è¨­è§’è‰²åç¨± (æœƒåŠ è¼‰ uep.pt)

# è¨­å‚™é…ç½®
device: "cuda"  # å¯é¸: "cuda", "cpu"
use_fp16: true  # æ˜¯å¦ä½¿ç”¨åŠç²¾åº¦ (FP16)ï¼Œå¯ç¯€çœé¡¯å­˜ä¸¦åŠ é€Ÿ
use_bf16: false  # å¯¦é©—æ€§: ä½¿ç”¨ BF16 (éœ€ Ampere+ GPU, æ¸¬è©¦é¡¯ç¤º +4.6% æé€Ÿ)

# ğŸš€ é€²éšå„ªåŒ–é…ç½®ï¼ˆç„¡éœ€é¡å¤–å¥—ä»¶ï¼‰
advanced_optimization:
  # torch.compile (PyTorch 2.0+ ç·¨è­¯å„ªåŒ– - å…§å»ºåŠŸèƒ½)
  use_torch_compile: true  # å•Ÿç”¨ torch.compile (GPT/S2Mel/BigVGAN åŠ é€Ÿ 1.3-1.5x)
  compile_mode: "reduce-overhead"  # ç·¨è­¯æ¨¡å¼: "default", "reduce-overhead", "max-autotune"
  
  # ğŸ”¥ æ¨¡å‹é ç†± (Warmup)
  enable_warmup: true  # å•Ÿç”¨åˆå§‹åŒ–é ç†±ï¼Œæå‰ç·¨è­¯ torch.compile å’Œ CUDA kernel
  warmup_text: "This is a test generation for warmup."  # é ç†±æ–‡æœ¬ï¼ˆç°¡çŸ­å³å¯ï¼‰
  warmup_iterations: 1  # é ç†±æ¬¡æ•¸ï¼ˆ1-2 æ¬¡å³å¯ï¼‰
  
  # cuDNN è‡ªå‹•èª¿å„ª (è‡ªå‹•é¸æ“‡æœ€å„ª kernel)
  cudnn_benchmark: true  # å•Ÿç”¨ cuDNN benchmark (åŠ é€Ÿ 5-10%)
  
  # Memory Efficient Attention (PyTorch 2.0+ SDPA)
  use_sdpa: true  # ä½¿ç”¨ scaled_dot_product_attention (åŠ é€Ÿ 20-40%, çœè¨˜æ†¶é«”)
  enable_math: true  # å•Ÿç”¨ math kernel (fallback)
  enable_flash: true  # å•Ÿç”¨ flash attention kernel (æœ€å¿«)
  enable_mem_efficient: true  # å•Ÿç”¨ memory efficient kernel (çœè¨˜æ†¶é«”)
  
  # å‹•æ…‹é‡åŒ– (å¯é¸ï¼Œå¯èƒ½å½±éŸ¿éŸ³è³ª)
  use_dynamic_quantization: false  # å•Ÿç”¨ INT8 å‹•æ…‹é‡åŒ– (Linear å±¤, åŠ é€Ÿ 1.5-2x, çœ VRAM)
  quantize_gpt: false  # é‡åŒ– GPT æ¨¡å‹
  quantize_s2mel: false  # é‡åŒ– S2Mel æ¨¡å‹

# Chunking é…ç½® (æ–‡æœ¬åˆ†æ®µ)
chunking:
  enabled: true  # æ˜¯å¦å•Ÿç”¨åˆ†æ®µ
  threshold: 100  # å­—ç¬¦æ•¸é–¾å€¼ï¼Œè¶…éæ­¤å€¼å°‡è§¸ç™¼åˆ†æ®µ (ğŸš€ å·²å„ªåŒ–: é™ä½ä»¥åŠ å¿«éŸ¿æ‡‰)
  max_tokens: 150  # æ¯æ®µæœ€å¤§ BPE tokens æ•¸é‡ (ğŸš€ å·²å„ªåŒ–: é™ä½ä»¥æ¸›å°‘ GPT ç”Ÿæˆæ™‚é–“)

# æƒ…æ„Ÿé…ç½®
emotion:
  max_strength: 0.5  # æƒ…æ„Ÿå¼·åº¦ä¸Šé™ (0.0 - 1.0)ï¼Œ0.3 è¡¨ç¤ºä¿ç•™ 70% åŸè²
  default: null  # é è¨­æƒ…æ„Ÿå‘é‡ (null = ä½¿ç”¨è§’è‰²åŸè²ï¼Œä¹Ÿå¯è¨­ç½®ç‚º 8D åˆ—è¡¨)
  # ä¾‹å¦‚: default: [0.1, 0.0, 0.0, 0.0, 0.0, 0.0, 0.1, 0.2]  # [happy, angry, sad, afraid, disgusted, melancholic, surprised, calm]

# æ’­æ”¾é…ç½®
playback:
  auto_play: true  # æ˜¯å¦è‡ªå‹•æ’­æ”¾ (ä¸ä¿å­˜æ™‚)
  cleanup_temp: true  # æ’­æ”¾å®Œç•¢å¾Œæ˜¯å¦æ¸…ç†è‡¨æ™‚æ–‡ä»¶

# æ—¥èªŒé…ç½®
logging:
  show_synthesis_time: true  # æ˜¯å¦é¡¯ç¤ºåˆæˆæ™‚é–“
  show_emotion_vector: true  # æ˜¯å¦é¡¯ç¤ºæƒ…æ„Ÿå‘é‡è©³æƒ…

