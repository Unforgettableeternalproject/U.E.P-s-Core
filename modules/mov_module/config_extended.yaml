# MOV 模組擴展配置示例
# 展示新架構的配置方式

# ==================== 處理器配置 ====================
handlers:
  # 層級事件處理器
  layer:
    enabled: true
    priority: 100  # 高優先級
  
  # 拖曳互動處理器
  drag:
    enabled: true
    priority: 90
    throw_velocity_threshold: 500.0  # 投擲速度閾值（像素/秒）
    height_threshold: 100  # 浮空/地面判斷高度（像素）
  
  # 檔案投放處理器（預留）
  file_drop:
    enabled: false  # 暫未實現
    priority: 80
    trigger_zones:
      - type: center
        radius: 100
        animation: receive_file_happy
      - type: any
        animation: receive_file_normal

# ==================== 動畫策略配置 ====================
animation_strategies:
  # 策略優先級順序（從高到低）
  priority_order:
    - interaction  # 互動觸發的動畫（最高優先級）
    - layer        # 層級驅動的動畫
    - state        # 狀態驅動的動畫（基礎優先級）
  
  # 層級策略配置
  layer:
    enabled: true
    priority: 50
    # 層級動畫映射在 ani_module/state_animations.yaml 中定義
  
  # 互動策略配置（預留）
  interaction:
    enabled: true
    priority: 100
    animations:
      drag_start: struggle
      drag_loop: struggle
      drag_end_ground: land_ground
      drag_end_float: return_float
      thrown: thrown
      catch_file: receive_file

# ==================== 行為擴展配置 ====================
behaviors:
  # 現有行為保持不變
  idle:
    min_duration: 3.0
    max_duration: 8.0
  
  movement:
    target_reach_threshold: 30.0
  
  transition:
    duration: 0.8
  
  # 新行為示例（預留）
  interact:
    enabled: false
    # 互動行為：響應特定事件的複雜行為序列
    sequences:
      receive_file:
        - action: look_at
          duration: 0.5
        - action: move_to
          max_duration: 2.0
        - action: pick_up
          duration: 0.5
        - action: celebrate
          duration: 1.5

# ==================== 互動系統配置 ====================
interactions:
  # 拖曳設置
  drag:
    trigger_threshold: 5  # 開始拖曳的最小移動距離（像素）
    struggle_animation: struggle
    struggle_loop: true
  
  # 投擲設置
  throw:
    velocity_threshold: 500.0  # 判定為投擲的速度閾值
    max_velocity: 2000.0  # 最大投擲速度限制
    gravity_multiplier: 1.2  # 投擲時的重力倍數
  
  # 檔案投放設置（預留）
  file_drop:
    enabled: false
    accept_types:
      - ".txt"
      - ".md"
      - ".py"
      - ".json"
    zones:
      center:
        radius: 100
        reaction: excited
      nearby:
        radius: 200
        reaction: interested
      far:
        radius: 300
        reaction: curious

# ==================== 動畫覆寫 ====================
# 允許針對特定情境覆寫默認動畫選擇
animation_overrides:
  # 拖曳時強制使用掙扎動畫
  dragging:
    force_animation: struggle
    ignore_mood: true
  
  # 投擲後的落地動畫
  thrown_landing:
    ground: land_ground
    float: stabilize_float
  
  # 接收檔案時的動畫（預留）
  file_received:
    happy_mood: receive_file_happy
    neutral_mood: receive_file_normal
    sad_mood: receive_file_careful

# ==================== 調試與測試 ====================
debug:
  log_handler_chain: false  # 記錄處理器鏈執行
  log_strategy_selection: false  # 記錄策略選擇過程
  log_animation_triggers: false  # 記錄動畫觸發
  show_interaction_zones: false  # 在 UI 顯示互動區域（需要 UI 支援）

# ==================== 性能優化 ====================
performance:
  handler_cache_size: 50  # 處理器結果緩存大小
  strategy_cache_ttl: 1.0  # 策略結果緩存時間（秒）
  event_throttle_ms: 16  # 事件節流間隔（毫秒）
